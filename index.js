var{keys:A}=Object,_={title:'My Blog',author:'Bob Smith',description:'This is my blog where I write about things',showAboutPage:!0,sortArticlesByDate:!0,socialLink:'https://twitter.com/elonmusk',keywords:['blog','website','javascript'],since:2023,lang:'en-US',link:'https://vanilla-js-markdown-blog.vercel.app',measurementId:''},c=[{title:'What is Lorem Ipsum?',fileName:'example.md',description:'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris elementum commodo lacus, ac pretium nisl volutpat sed. Fusce non nulla vel eros tristique sodales ac et metus. Donec quis dolor faucibus, vestibulum ligula eu, posuere neque. Duis tincidunt sagittis nulla, sit amet blandit nulla vehicula nec.',createdAt:'2017-01-01',tags:['Cooking','Music']},{title:'Why do we use it?',fileName:'example.md',description:'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris elementum commodo lacus, ac pretium nisl volutpat sed. Fusce non nulla vel eros tristique sodales ac et metus. Donec quis dolor faucibus, vestibulum ligula eu, posuere neque. Duis tincidunt sagittis nulla, sit amet blandit nulla vehicula nec.',createdAt:'2018-12-01',tags:['Cooking']},{fileName:'more-complex.md',title:'Where does it come from?',description:'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris elementum commodo lacus, ac pretium nisl volutpat sed. Fusce non nulla vel eros tristique sodales ac et metus. Donec quis dolor faucibus, vestibulum ligula eu, posuere neque. Duis tincidunt sagittis nulla, sit amet blandit nulla vehicula nec.',createdAt:'2018-03-20',tags:['Music','Cooking','Other']}],i=aW=>{const aX=new Date(aW);return aX.toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric'})},j=aY=>{const aZ=aY.map(({hidden:bA,...bB},_C)=>({...bB,id:_C+1,tags:(bB.tags||[]).sort(),originalCreatedAt:bB.createdAt,createdAt:i(bB.createdAt)}));return _.sortArticlesByDate?aZ.sort((a,b)=>new Date(b.originalCreatedAt)-new Date(a.originalCreatedAt)):aZ},k=bC=>{const bD=bC.reduce((bF,bG)=>{for(const bH of bG.tags)bF[bH]=(bF[bH]||0)+1;return bF},{}),bE=A(bD).map(bI=>({name:bI,count:bD[bI]}));return bE.sort((a,b)=>a.name.localeCompare(b.name))},l=()=>{if(!_.measurementId)return;document.head.innerHTML=`
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','${_.measurementId}');</script>
  `+document.head.innerHTML;document.body.innerHTML=`
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=${_.measurementId}"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  `+document.body.innerHTML},p={init:()=>{window.addEventListener('popstate',bX=>p.go(bX.state.route,!1));p.go(location.pathname+location.search)},go:(bY,bZ=!0)=>{bZ&&history.pushState({route:bY},'',bY);let cA=null;if(bY=='/')cA=document.createElement('home-page'); else if(bY=='/404')cA=document.createElement('not-found-page'); else if(bY=='/about')cA=_.showAboutPage?document.createElement('about-page'):null; else if(bY.startsWith('/search'))cA=document.createElement('search-page'); else if(bY.startsWith('/article-')){const cB=bY.split('-')[1],cC=app.articles.find(cD=>cD.id== +cB);cC&&(cA=document.createElement('article-page'),cA.dataset.articleId=cB)}!cA&&(cA=document.createElement('not-found-page'));if(cA){const cE=document.getElementById('root');cE.innerHTML='';cE.appendChild(cA);window.scrollX=0;window.scrollY=0}},back:()=>{history.back();window.scrollX=0;window.scrollY=0}},r=dE=>{const dF=dE.description?`content="${dE.description}"`:``,dG=`https://og-image-craigary.vercel.app/${dE.title}.png?theme=dark&md=1&fontSize=125px`;let _D=`
    <meta name="keywords" content="${dE.keywords.join(', ')}" data-seo="true">
    <meta name="description" ${dF} data-seo="true">
    <meta name="author" content="${dE.author}" data-seo="true">
    <meta property="og:url" content="${dE.url}" data-seo="true">
    <meta property="og:image" content="${dG}" data-seo="true">
    <meta property="og:type" content="${dE.type}" data-seo="true">
    <meta property="og:title" content="${dE.title}" data-seo="true">
    <meta property="og:locale" content="${dE.locale}" data-seo="true">
    <meta property="og:description" ${dF} data-seo="true">
    <meta property="twitter:image" content="${dG}" data-seo="true">
    <meta name="twitter:card" content="summary_large_image" data-seo="true">
    <meta property="twitter:title" content="${dE.title}" data-seo="true">
    <meta property="twitter:description" ${dF} data-seo="true">
  `;dE.withCanonical&&(_D+=`<link rel="canonical" href="${dE.url}" data-seo="true">`);dE.type=='article'&&(_D+=`
      <meta property="article:published_time" config="${dE.publishedTime}" data-seo="true">
      <meta property="article:author" content="${dE.author}" data-seo="true">
    `);return _D},s=dH=>{const dI=document.querySelectorAll('meta[data-seo="true"], link[data-seo="true"]');for(const dJ of dI)dJ.remove();document.head.insertAdjacentHTML('beforeend',r(dH));document.title=dH.title};'serviceWorker' in navigator&&!_.link.includes('localhost')&&navigator.serviceWorker.register('/sw.js').then(B=>console.log('ServiceWorker registration successful with scope: ',B.scope)).catch(C=>console.error('ServiceWorker registration failed: ',C));class AboutPage extends HTMLElement{constructor(){super()}connectedCallback(){this.renderTemplate();this.renderAboutContent();s({title:'About',type:'article',locale:_.lang,author:_.author,keywords:_.keywords,url:`${_.link}/about`,publishedTime:'2137-01-01',description:_.description})}renderTemplate(){var _a=document.getElementById('about-page-template');this.appendChild(_a.content.cloneNode(!0))}renderAboutContent(){var d=document.getElementById('about-page-generated');this.querySelector('article').appendChild(d.content.cloneNode(!0))}}window.customElements.define('about-page',AboutPage);class ArticleCard extends HTMLElement{constructor(){super()}connectedCallback(){this.renderTemplate();var D=JSON.parse(this.dataset.articleId),_b=app.articles.find(_A=>_A.id==D);this.renderContent(_b);this.setupClickEvent(_b)}renderTemplate(){var e=document.getElementById('article-card-template');this.appendChild(e.content.cloneNode(!0));this.style.width='100%'}renderContent(E){this.querySelector('h3').innerHTML=E.title;this.querySelector('p').innerHTML=E.description;this.querySelector('time').innerHTML=E.createdAt}setupClickEvent(aA){this.querySelector('article').onclick=aB=>{aB.preventDefault();p.go(`/article-${aA.id}`)}}}window.customElements.define('article-card',ArticleCard);class ArticleFooter extends HTMLElement{constructor(){super();this.renderTemplate();this.setupEventListeners();this.style.width='100%'}renderTemplate(){var aC=document.getElementById('article-footer-template');this.appendChild(aC.content.cloneNode(!0))}setupEventListeners(){for(const aD of this.querySelectorAll('button')){if(aD.innerHTML.endsWith('Back')){aD.addEventListener('click',()=>p.back());continue}aD.addEventListener('click',()=>this.smoothScrollTop())}}smoothScrollTop(){var aE=document.documentElement.scrollTop||document.body.scrollTop;aE>0&&(window.requestAnimationFrame(()=>this.smoothScrollTop()),window.scrollTo(0,aE-aE/8))}}window.customElements.define('article-footer',ArticleFooter);class ArticlePage extends HTMLElement{constructor(){super()}async connectedCallback(){this.renderTemplate();var aF=JSON.parse(this.dataset.articleId),_B=app.articles.find(aG=>aG.id==aF);this.renderArticleContent(_B);this.renderMetaData(_B);s({type:'article',locale:_.lang,author:_.author,keywords:_.keywords,title:_B.title,description:_B.description,publishedTime:_B.originalCreatedAt,url:`${_.link}/article-${_B.id}`})}renderTemplate(){var aH=document.getElementById('article-page-template');this.appendChild(aH.content.cloneNode(!0))}renderArticleContent(aI){var aJ=document.getElementById(`article-${aI.id}-page-generated`);this.querySelector('article').appendChild(aJ.content.cloneNode(!0))}renderMetaData(aK){this.querySelector('h1').innerHTML=aK.title;this.querySelector('time').innerHTML=aK.createdAt;this.querySelector('span[class=\'article__author\']').innerHTML=`<a href="${_.socialLink}" target="_blank">${_.author}</a>`;var aL=this.querySelector('div[class=\'article__tags\']');for(const aM of aK.tags){var _c=this.createTagElement(aM);aL.appendChild(_c)}}createTagElement(aN){var aO=document.createElement('span');aO.innerHTML=aN;aO.classList.add('article__tag');aO.addEventListener('click',aP=>{aP.preventDefault();p.go(`/search?tag=${aN}`)});return aO}}window.customElements.define('article-page',ArticlePage);class HomePage extends HTMLElement{constructor(){super()}connectedCallback(){this.renderTemplate();this.renderArticleCards();s({type:'website',url:_.link,withCanonical:!0,title:_.title,locale:_.lang,author:_.author,keywords:_.keywords,description:_.description})}renderTemplate(){var aQ=document.getElementById('home-page-template');this.appendChild(aQ.content.cloneNode(!0))}renderArticleCards(){var aR=this.querySelector('main');aR.innerHTML='';for(const aT of app.articles){var aS=this.createArticleCardElement(aT);aR.appendChild(aS)}}createArticleCardElement(aU){var aV=document.createElement('article-card');aV.dataset.articleId=aU.id;return aV}}window.customElements.define('home-page',HomePage);window.app={articles:[],availableTags:[]};window.addEventListener('DOMContentLoaded',(()=>{document.title=_.title;l();app.articles=j(c);app.availableTags=k(app.articles);p.init()}));class NavigationBar extends HTMLElement{#LINKS=[{href:'/about',text:'About'},{href:'/search',text:'Search'}];constructor(){super();this.renderTemplate();this.setupHomeLink();this.renderLinks()}renderTemplate(){var bJ=document.getElementById('navigation-bar-template');this.appendChild(bJ.content.cloneNode(!0))}setupHomeLink(){var bK=this.querySelector('h3');bK.innerHTML+=`<span>${_.title}</span>`;bK&&bK.addEventListener('click',bL=>{bL.preventDefault();if(location.pathname!=='/')p.go('/')})}renderLinks(){var bM=this.querySelector('ul');this.#LINKS.filter(bN=>_.showAboutPage?!0:bN.href!=='/about').forEach(bO=>bM.appendChild(this.createLinkElement(bO)))}createLinkElement(bP){var bQ=document.createElement('li');bQ.innerHTML=bP.text;bQ.classList.add('navigation-bar__link');location.pathname==bP.href&&bQ.classList.add('navigation-bar__link--active');bQ.addEventListener('click',bR=>{bR.preventDefault();location.pathname!==bP.href&&p.go(bP.href)});return bQ}}window.customElements.define('navigation-bar',NavigationBar);class NotFoundPage extends HTMLElement{constructor(){super()}connectedCallback(){var bS=document.getElementById('not-found-page-template');this.appendChild(bS.content.cloneNode(!0))}}window.customElements.define('not-found-page',NotFoundPage);class PageFooter extends HTMLElement{constructor(){super();this.renderTemplate();this.renderContent()}renderTemplate(){var bT=document.getElementById('page-footer-template');this.appendChild(bT.content.cloneNode(!0))}renderContent(){var bU=new Date().getFullYear(),bV=_.since&&_.since<bU,bW=bV?`${_.since} - ${bU}`:bU;this.querySelector('p').innerHTML=`@ <a href="${_.socialLink}" target="_blank">${_.author}</a> ${bW}`}}window.customElements.define('page-footer',PageFooter);class SearchPage extends HTMLElement{constructor(){super()}connectedCallback(){this.renderTemplate();this.setupInputEventListeners();this.renderTags();this.renderResults();s({type:'website',title:'Search',locale:_.lang,author:_.author,keywords:_.keywords,url:`${_.link}/search`,description:_.description})}renderTemplate(){var cF=document.getElementById('search-page-template');this.appendChild(cF.content.cloneNode(!0))}setupInputEventListeners(){var cG=this.getTagFromQuery(),cH=this.getSearchedQuery(),cI=this.querySelector('input');cI.addEventListener('input',cJ=>this.renderResults(cJ.target.value));cG&&(cI.placeholder=`Search in #${cG}`);cH&&(cI.value=cH)}renderTags(){var cK=this.querySelector('ul[class=\'search-page__tags\']');for(const cM of app.availableTags){var cL=this.createTagElement(cM);cK.appendChild(cL)}}createTagElement(cN){var cO=document.createElement('li'),cP=this.getTagFromQuery();cO.innerHTML=`${cN.name} (${cN.count})`;cO.classList.add('search-page__tag');cN.name==cP&&cO.classList.add('search-page__tag--active');cO.addEventListener('click',cQ=>{cQ.preventDefault();var cR=this.querySelector('input'),cS=cR.value||'';p.go(cN.name==cP?`/search`:`/search?tag=${cN.name}${cS?`&query=${cS}`:''}`)});return cO}renderResults(cT=this.getSearchedQuery()){var cU=this.getTagFromQuery(),cV=this.querySelector('div[class=\'search-page__results\']'),_d=app.articles.filter(cW=>!cU||cW.tags.includes(cU)).filter(cX=>!cT||cX.title.toLowerCase().includes(cT.toLowerCase())||cX.description.toLowerCase().includes(cT.toLowerCase()));cV.innerHTML='';if(!_d.length){cV.innerHTML='<h5 class="search-page__no-results">No results found</h5>';return}for(const cY of _d)this.appendArticleCardElement(cV,cY)}appendArticleCardElement(cZ,dA){var dB=document.createElement('article-card');dB.dataset.articleId=dA.id;cZ.appendChild(dB)}getTagFromQuery(){var dC=new URLSearchParams(window.location.search);return dC.get('tag')}getSearchedQuery(){var dD=new URLSearchParams(window.location.search);return dD.get('query')}}window.customElements.define('search-page',SearchPage);